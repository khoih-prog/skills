# RAG 파이프라인 품질 검증 리포트
**날짜:** 2026-02-17  
**모델:** nomic-embed-text (Ollama)  
**데이터:** 150건 (4개 JSONL)

## 1단계: 인제스트 결과 ✅
| 파일 | 건수 | 타입 |
|------|------|------|
| success_cases.jsonl | 59 | 합격 후기/노하우 |
| criteria_supplement.jsonl | 35 | 심사기준/평가 |
| gov_programs_supplement.jsonl | 37 | 정부사업 정보 |
| vc_investment.jsonl | 19 | 벤처투자 현황 |
| **합계** | **150** | |

벡터 저장소: `vector_store.json` (1.6MB)

## 2단계: 품질 검증 결과 ⚠️ 심각한 문제 발견

### 핵심 문제: **변별력 부재**
- 코사인 유사도가 0.81~0.87 범위에 과도하게 밀집
- 10개 쿼리 중 **8개에서 동일 문서("재도전성공패키지 지원 요건")가 Top-1**
- "벤처투자 현황 알려줘"에 투자 데이터가 아닌 심사기준이 반환됨
- "시리즈A 투자 받으려면?"도 마찬가지 — vc_investment 데이터가 전혀 검색되지 않음

### 쿼리별 실제 적합성 (수동 평가)

| # | 쿼리 | Top-1 실제 적합성 | 문제 |
|---|------|-------------------|------|
| Q1 | TIPS 합격 준비 | ❌ LOW | 재도전패키지 반환 (TIPS 후기 필요) |
| Q2 | 초기창업패키지 심사기준 | ⚠️ MED | #2에 초기창업패키지 심층인터뷰 있음 |
| Q3 | 예비창업패키지 합격 후기 | ❌ LOW | success_case 데이터 미검색 |
| Q4 | 2026 정부사업 | ❌ LOW | gov_program 데이터 미검색 |
| Q5 | 벤처투자 현황 | ❌ LOW | vc_investment 데이터 미검색 |
| Q6 | TIPS 운영사 차이 | ❌ LOW | 관련 데이터 자체가 부족 |
| Q7 | 창업도약패키지 자격 | ❌ LOW | 재도전패키지 반환 |
| Q8 | 청년창업사관학교 노하우 | ⚠️ MED | #3에 관련 데이터 있음 |
| Q9 | 시리즈A 투자 | ❌ LOW | vc_investment 미검색 |
| Q10 | 가점 받는 방법 | ⚠️ MED | 일반적 심사기준만 반환 |

**실제 적합성: Top-1 적합 0/10 (0%), Top-3 내 부분적합 3/10 (30%)**

## 3단계: 원인 분석 및 개선 방안

### 근본 원인
1. **nomic-embed-text의 한국어 임베딩 품질 저조** — 한국어 토큰화가 약해 모든 문서가 비슷한 벡터로 임베딩됨
2. **chunk 텍스트가 구조화 메타데이터 위주** — "카테고리:", "심사기준:" 같은 prefix가 모든 chunk에 공통으로 포함되어 유사도를 끌어올림
3. **단일 chunk 전략** — 긴 문서도 하나의 chunk로 처리하여 핵심 키워드가 희석됨

### 권장 개선사항 (우선순위순)

| 순위 | 개선 | 기대 효과 |
|------|------|----------|
| 🔴 1 | **한국어 임베딩 모델로 교체** (`bge-m3` 또는 `multilingual-e5-large`) | 변별력 대폭 향상 |
| 🔴 2 | **BM25 키워드 검색 하이브리드** 추가 (임베딩+키워드 합산) | 프로그램명 exact match 보장 |
| 🟡 3 | chunk 텍스트에서 구조화 prefix 제거, 자연어 문장으로 변환 | 임베딩 품질 향상 |
| 🟡 4 | type별 필터링 지원 (쿼리 의도에 따라 success_case만 검색 등) | precision 향상 |
| 🟢 5 | reranker 추가 (cross-encoder) | top-k 재정렬로 정확도 향상 |

### 데이터 부족 영역 (다음 수집 타겟)
1. **TIPS 운영사별 비교 데이터** — 현재 0건
2. **예비창업패키지/초기창업패키지 합격 후기** — success_cases에 TIPS 위주, 타 사업 부족
3. **구체적 가점 항목** — 사업별 가점 기준 데이터 부재
4. **시리즈A/B 투자 실무 가이드** — VC 현황 통계는 있으나 실무 노하우 부재
5. **창업도약패키지 신청 자격 상세** — gov_programs에 개괄만 있고 자격요건 상세 없음

### 품질 좋은 영역
- TIPS 합격 후기/노하우 (success_cases 59건 중 다수)
- 심사기준 일반론 (criteria 35건)
- 2025-2026 벤처투자 통계 (vc_investment 19건)

## 파일 구조
```
skills/raon-os/
├── scripts/rag_pipeline.py    # 신규: chunker + embedder + retriever
├── vector_store.json          # 150건 벡터 저장소
├── rag_eval_report.json       # 10개 쿼리 raw 결과
└── eval_data/                 # 원본 데이터 (150건)
```

## 다음 단계
1. `ollama pull bge-m3` → 한국어 임베딩 모델로 재인제스트
2. BM25 하이브리드 검색 구현 (`rag_pipeline.py`에 추가)
3. 데이터 부족 영역 5개 추가 수집 (최소 50건)
